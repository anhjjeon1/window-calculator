<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì²­ê°œêµ¬ë¦¬ AI ìƒ¤ì‹œ í”Œë«í¼</title>
    <script type="importmap">
      {
        "imports": {
          "@google/generative-ai": "https://esm.run/@google/generative-ai"
        }
      }
    </script>
    <style>
        /* [ìŠ¤íƒ€ì¼ ìœ ì§€: ì „ë¬¸ì ì´ê³  ì„¸ë ¨ëœ ë””ìì¸] */
        :root {
            --primary-deep: #0F2449; --primary-blue: #1E4E8C; --accent-color: #F2B705;
            --bg-color: #F4F7FA; --text-dark: #222222; --text-gray: #555555;
            --card-bg: #ffffff; --card-shadow: 0 8px 20px rgba(0,0,0,0.08);
            --card-border-radius: 12px;
        }
        body { font-family: 'Noto Sans KR', sans-serif; background-color: var(--bg-color); margin: 0; padding: 0; color: var(--text-dark); line-height: 1.4; }
        
        header { background: linear-gradient(135deg, var(--primary-deep), var(--primary-blue)); padding: 18px 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.15); display: flex; align-items: center; position: sticky; top: 0; z-index: 100; color: white; border-bottom: 2px solid var(--accent-color); }
        .logo-img { font-size: 32px; margin-right: 12px; }
        .header-text { flex: 1; }
        .header-text h1 { margin: 0; font-size: 20px; font-weight: 700; }
        .header-sub { display: flex; justify-content: space-between; margin-top: 2px; font-size: 12px; opacity: 0.9; }
        .version-tag { font-size: 10px; background: rgba(255,255,255,0.15); padding: 2px 6px; border-radius: 4px; }

        .container { max-width: 600px; margin: 0 auto; padding: 15px; padding-bottom: 80px; }
        
        .address-box { background: var(--card-bg); padding: 8px; border-radius: var(--card-border-radius); box-shadow: var(--card-shadow); margin-bottom: 15px; display: flex; gap: 8px; border: 1px solid #E0E6ED; }
        .address-box input { border: none; background: #F0F4F8; padding: 10px 12px; border-radius: 8px; flex: 1; outline: none; }
        .btn-search { background: var(--primary-blue); color: white; border: none; padding: 0 15px; border-radius: 8px; font-weight: 500; cursor: pointer; }

        /* [NEW] ì¹˜ìˆ˜ ì¸¡ì • ë°©ë²• ê°€ì´ë“œ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .guide-box {
            background: #E3F2FD;
            border: 1px solid #90CAF9;
            border-radius: var(--card-border-radius);
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.1);
        }
        .guide-title {
            font-size: 15px;
            font-weight: 700;
            color: var(--primary-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        .guide-steps {
            font-size: 13px;
            color: #37474F;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .step-item { display: flex; align-items: flex-start; }
        .step-num { 
            background: var(--primary-blue); color: white; 
            width: 18px; height: 18px; border-radius: 50%; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 11px; margin-right: 8px; flex-shrink: 0; margin-top: 2px;
        }

        .input-card { background: var(--card-bg); border-radius: var(--card-border-radius); box-shadow: var(--card-shadow); margin-bottom: 12px; overflow: hidden; display: flex; flex-direction: row; border: 1px solid #E0E6ED; position: relative;}
        
        .ai-loading {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: rgba(255,255,255,0.85); z-index: 10;
            display: none; flex-direction: column; justify-content: center; align-items: center;
            font-weight: bold; color: var(--primary-blue); font-size: 14px;
            backdrop-filter: blur(2px);
        }
        .spinner {
            border: 4px solid #f3f3f3; border-top: 4px solid var(--accent-color);
            border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin-bottom: 10px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .photo-area { width: 30%; background: #F8FAFC; border-right: 1px solid #E0E6ED; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; cursor: pointer; padding: 10px 0; }
        .camera-circle { width: 36px; height: 36px; background: #E3F2FD; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 6px; }
        .camera-circle i { font-size: 18px; color: var(--primary-blue); font-style: normal; }
        .photo-label { font-size: 11px; color: var(--text-gray); text-align: center; }
        .photo-input-hidden { position: absolute; width: 100%; height: 100%; opacity: 0; cursor: pointer; }

        .dim-area { width: 70%; padding: 12px; display: flex; flex-direction: column; gap: 6px; }
        .row-title { font-size: 14px; color: var(--primary-blue); font-weight: 700; margin-bottom: 2px; }
        select, input[type="number"] { width: 100%; padding: 0 10px; height: 38px; border: 1px solid #CFD8DC; border-radius: 6px; font-size: 13px; box-sizing: border-box; }
        .form-row { display: flex; gap: 6px; }

        .btn-calc { width: 100%; padding: 16px; background: linear-gradient(145deg, var(--primary-blue), var(--primary-deep)); color: white; border: none; border-radius: var(--card-border-radius); font-size: 18px; font-weight: 700; cursor: pointer; margin-top: 10px; box-shadow: 0 6px 15px rgba(30, 78, 140, 0.4); }
        .disclaimer-box { text-align: center; margin-top: 15px; padding: 10px 12px; background: #FFFCE0; border-radius: 10px; border: 1px solid #FFE082; color: #7F6000; font-size: 12px; margin-bottom: 20px; }

        .company-grid-2d { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 15px; }
        .btn-2d { display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 12px 5px; border-radius: 10px; text-decoration: none; color: white; font-weight: bold; border: none; box-shadow: 0 4px 8px rgba(0,0,0,0.15); }
        .bg-a { background: linear-gradient(145deg, #E53935, #C62828); }
        .bg-b { background: linear-gradient(145deg, #FB8C00, #EF6C00); }
        .bg-c { background: linear-gradient(145deg, #FDD835, #FBC02D); color: #424242 !important; text-shadow: none !important; }
        .bg-d { background: linear-gradient(145deg, #43A047, #2E7D32); }
        .bg-e { background: linear-gradient(145deg, #1E88E5, #1565C0); }
        .bg-f { background: linear-gradient(145deg, #8E24AA, #6A1B9A); }

        .result-section { display: none; margin-top: 20px; border-top: 2px dashed #E0E6ED; padding-top: 20px; }
        .chart-box { background: var(--card-bg); padding: 20px 15px; border-radius: var(--card-border-radius); box-shadow: var(--card-shadow); border: 1px solid #E0E6ED; }
        .chart-title { font-size: 16px; font-weight: 700; margin-bottom: 15px; color: var(--primary-deep); text-align: center; }
        .graph-row { display: flex; align-items: center; margin-bottom: 12px; font-size: 13px; }
        .g-label { width: 50px; font-weight: 500; color: var(--text-gray); }
        .g-bar-area { flex: 1; height: 28px; background: #F0F4F8; border-radius: 6px; overflow: hidden; margin: 0 10px; }
        .g-bar { height: 100%; background: #B0BEC5; width: 0%; transition: width 1s ease-in-out; border-radius: 6px; }
        .g-bar.best { background: linear-gradient(90deg, #FF7043, #F4511E); }
        .g-bar.second { background: linear-gradient(90deg, #42A5F5, #1E88E5); }
        .g-price { width: 80px; text-align: right; font-weight: 700; }
        
        footer { background: var(--primary-deep); color: #B0BEC5; padding: 20px; text-align: center; font-size: 12px; }
    </style>
</head>
<body>

<header>
    <div class="logo-img">ğŸ¸</div>
    <div class="header-text">
        <h1>ì²­ê°œêµ¬ë¦¬ ìƒ¤ì‹œ í”Œë«í¼</h1>
        <div class="header-sub">
            <span>ëŒ€í•œë¯¼êµ­ 1ë“± ìƒ¤ì‹œ ë¹„êµê²¬ì </span>
            <span class="version-tag">Ver 2.0 AI</span>
        </div>
    </div>
</header>

<div class="container">
    <div class="address-box">
        <input type="text" id="aptAddress" placeholder="ì•„íŒŒíŠ¸ëª… ë˜ëŠ” ì£¼ì†Œ ê²€ìƒ‰...">
        <button class="btn-search">ğŸ” ê²€ìƒ‰</button>
    </div>

    <div class="guide-box">
        <div class="guide-title">
            <i class="fas fa-ruler-combined" style="margin-right:8px;"></i> ğŸ“¸ AI ì¹˜ìˆ˜ ì¸¡ì • ë°©ë²•
        </div>
        <div class="guide-steps">
            <div class="step-item">
                <div class="step-num">1</div>
                <div>ì°½ë¬¸ ì¤‘ì•™ì— <strong>A4 ìš©ì§€</strong>ë¥¼ ë¶™ì—¬ì£¼ì„¸ìš”.</div>
            </div>
            <div class="step-item">
                <div class="step-num">2</div>
                <div><strong>ì¹´ë©”ë¼ ë²„íŠ¼</strong>ì„ ëˆŒëŸ¬ ì°½ë¬¸ ì „ì²´ë¥¼ ì´¬ì˜í•˜ì„¸ìš”.</div>
            </div>
            <div class="step-item">
                <div class="step-num">3</div>
                <div>AIê°€ <strong>ì°½í˜¸ ì¢…ë¥˜ì™€ í¬ê¸°</strong>ë¥¼ ìë™ ì…ë ¥í•©ë‹ˆë‹¤.</div>
            </div>
        </div>
    </div>

    <div id="inputListArea"></div>

    <button class="btn-calc" onclick="calculateEstimates()">âœ¨ ì—…ì²´ë³„ ì°½í˜¸ê²¬ì  ë¹„êµ</button>

    <div class="disclaimer-box">
        <strong style="display:block; margin-bottom:4px;">âš ï¸ ê²¬ì  ìœ ì˜ì‚¬í•­</strong>
        AI ìë™ ì¸¡ì •ê°’ì€ ì‚¬ì§„ í™˜ê²½ì— ë”°ë¼ ì˜¤ì°¨ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
        ë°˜ë“œì‹œ <strong>ì¤„ìë¡œ ì‹¤ì¸¡í•˜ì—¬ ìˆ˜ì¹˜ë¥¼ í™•ì¸(ìˆ˜ì •)</strong>í•´ ì£¼ì„¸ìš”.
    </div>

    <div class="chart-title" style="margin-bottom:12px; font-size:15px;">ğŸ‘©â€ğŸ’¼ ì¶”ì²œ ì—…ì²´ ë°”ë¡œ ì—°ê²°</div>
    <div class="company-grid-2d">
        <a href="tel:01000000001" class="btn-2d bg-a"><strong>Aì‚¬</strong><span>í‘œì¤€ì‹œê³µ</span></a>
        <a href="tel:01000000002" class="btn-2d bg-b"><strong>Bì‚¬</strong><span>ì•Œëœ°í˜•</span></a>
        <a href="tel:01000000003" class="btn-2d bg-c"><strong>Cì‚¬</strong><span>ê³ ê¸‰í˜•</span></a>
        <a href="tel:01000000004" class="btn-2d bg-d"><strong>Dì‚¬</strong><span>ë¹ ë¥¸ì‹œê³µ</span></a>
        <a href="tel:01000000005" class="btn-2d bg-e"><strong>Eì‚¬</strong><span>íŠ¹í™”í˜•</span></a>
        <a href="tel:01000000006" class="btn-2d bg-f"><strong>Fì‚¬</strong><span>ì¹œì ˆìƒë‹´</span></a>
    </div>

    <div id="resultSection" class="result-section">
        <div class="chart-box">
            <div class="chart-title">ğŸ“Š ì—…ì²´ë³„ ì˜ˆìƒ ê²¬ì  ë¹„êµ</div>
            <div id="graphContainer"></div>
        </div>
    </div>
</div>

<footer>
    <div class="footer-line">ì²­ê°œêµ¬ë¦¬ìƒ¤ì‹œ | ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸ : 123-36-31426 | ëŒ€í‘œ : ì „ì˜ì›…</div>
    <div class="footer-line">ê³ ê°ì„¼í„° 1599-7380 (08:00~17:00) | COPYRIGHT â“’ 2026 All Rights Reserved.</div>
</footer>

<script type="module">
    import { GoogleGenerativeAI } from "@google/generative-ai";

    // âœ… [ë³´ì•ˆ ì„¤ì •] í‚¤ë¥¼ 3ë“±ë¶„í•˜ì—¬ ì…ë ¥ ì™„ë£Œ
    const KEY_PART_1 = "AIzaSyCGtANQ";
    const KEY_PART_2 = "JNBEGSh9zCrTX";
    const KEY_PART_3 = "MEnR-PHxLlXtkw";
    
    // í‚¤ ê²°í•© (ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥)
    const API_KEY = KEY_PART_1 + KEY_PART_2 + KEY_PART_3;

    // ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡
    window.handleImageUpload = async function(inputElement, index) {
        const file = inputElement.files[0];
        if (!file) return;
        
        const loadingOverlay = document.getElementById(`loading_${index}`);
        loadingOverlay.style.display = 'flex';

        try {
            const genAI = new GoogleGenerativeAI(API_KEY);
            const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });

            const imagePart = await fileToGenerativePart(file);

            // AI í”„ë¡¬í”„íŠ¸ (ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„)
            const prompt = `
                ë‹¹ì‹ ì€ ì°½í˜¸ ê²¬ì  ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì‚¬ì§„ì„ ë¶„ì„í•˜ì—¬ JSON í˜•ì‹ìœ¼ë¡œë§Œ ë‹µí•˜ì„¸ìš”.
                
                1. ì°½í˜¸ ì¢…ë¥˜ íŒë‹¨ (typeCode):
                   - ë°œì½”ë‹ˆìš© ë‹¨ì°½(ì™¸ë¶€ë‘ ë§ë‹¿ìŒ): "S_BAL"
                   - ë‚´ë¶€ìš© ë‹¨ì°½(ë°©ì°½): "S_IN"
                   - ë‚´ë¶€ìš© ì´ì¤‘ì°½: "D_IN"
                   - í™•ì¥í˜• ì´ì¤‘ì°½: "D_EXT"
                   - ì‹œìŠ¤í…œì°½/í„°ë‹ë„ì–´: "SYS"
                   (í™•ì‹¤í•˜ì§€ ì•Šìœ¼ë©´ ê°€ì¥ ë¹„ìŠ·í•œ ê²ƒìœ¼ë¡œ ì¶”ì •)

                2. ì‚¬ì´ì¦ˆ ì¸¡ì • (width, height):
                   - ì‚¬ì§„ ì†ì— A4ìš©ì§€(ê°€ë¡œ 210mm, ì„¸ë¡œ 297mm)ê°€ ë¶™ì–´ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
                   - A4ìš©ì§€ì˜ í”½ì…€ í¬ê¸°ì™€ ë¹„êµí•˜ì—¬ ì°½ë¬¸ ì „ì²´(í”„ë ˆì„ í¬í•¨)ì˜ ê°€ë¡œ(width), ì„¸ë¡œ(height) ê¸¸ì´ë¥¼ mm ë‹¨ìœ„ë¡œ ì¶”ì •í•˜ì„¸ìš”.
                   - A4ìš©ì§€ê°€ ì•ˆ ë³´ì´ë©´ ì¼ë°˜ì ì¸ ì•„íŒŒíŠ¸ ì°½ë¬¸ ê·œê²©ì„ ì°¸ê³ í•˜ì—¬ ì¶”ì •í•˜ì„¸ìš”.
                
                3. ì‘ë‹µ í˜•ì‹ (JSONë§Œ ì¶œë ¥):
                {
                    "typeCode": "ë¬¸ìì—´",
                    "width": ìˆ«ì,
                    "height": ìˆ«ì
                }
            `;

            const result = await model.generateContent([prompt, imagePart]);
            const response = await result.response;
            const text = response.text().replace(/```json|```/g, "").trim();
            
            const data = JSON.parse(text);

            if(data.typeCode) document.getElementById(`type_${index}`).value = data.typeCode;
            if(data.width) document.getElementById(`w_${index}`).value = data.width;
            if(data.height) document.getElementById(`h_${index}`).value = data.height;

            alert(`âœ… AI ë¶„ì„ ì™„ë£Œ!\nì¢…ë¥˜: ${data.typeCode}\ní¬ê¸°: ${data.width} x ${data.height}mm\n\n*ì˜¤ì°¨ë¥¼ ì¤„ìë¡œ í™•ì¸í•´ì£¼ì„¸ìš”.`);

        } catch (error) {
            console.error(error);
            alert("AI ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        } finally {
            loadingOverlay.style.display = 'none';
        }
    };

    async function fileToGenerativePart(file) {
        return new Promise((resolve) => {
            const reader = new FileReader();
            reader.onloadend = () => {
                const base64Data = reader.result.split(',')[1];
                resolve({
                    inlineData: {
                        data: base64Data,
                        mimeType: file.type
                    }
                });
            };
            reader.readAsDataURL(file);
        });
    }

    // UI ìƒì„± ë° ê³„ì‚° ë¡œì§
    const locations = ["ê±°ì‹¤", "ì•ˆë°©", "ì¹¨ì‹¤1", "ì¹¨ì‹¤2", "ì¹¨ì‹¤3", "ì£¼ë°©", "ë°œì½”ë‹ˆ1", "ë°œì½”ë‹ˆ2", "í„°ë‹ë„ì–´"];
    const inputArea = document.getElementById('inputListArea');
    const windowOptions = `
        <option value="S_IN">ë‚´ë¶€ìš© ë‹¨ì°½ (ë°©ì°½)</option>
        <option value="S_BAL">ë°œì½”ë‹ˆìš© ë‹¨ì°½ (ì™¸ë¶€)</option>
        <option value="D_IN">ë‚´ë¶€ìš© ì´ì¤‘ì°½</option>
        <option value="D_EXT">í™•ì¥í˜• ì´ì¤‘ì°½ (ë‹¨ì—´â†‘)</option>
        <option value="SYS">ê³µí‹€ì¼ì²´í˜• / ì‹œìŠ¤í…œì°½</option>
        <option value="PJ">PJì°½ / í”„ë¡œì íŠ¸ì°½</option>
    `;

    locations.forEach((loc, index) => {
        const html = `
            <div class="input-card">
                <div id="loading_${index}" class="ai-loading">
                    <div class="spinner"></div>
                    <span>AI ì¸¡ì •ì¤‘...</span>
                </div>

                <div class="photo-area">
                    <div class="camera-circle"><i>ğŸ“·</i></div>
                    <div class="photo-label">ì‚¬ì§„ì´¬ì˜<br>(A4ë¶€ì°©)</div>
                    <div style="font-size:10px; color:#E53935; font-weight:700; margin-top:4px;">AI ì¸¡ì •</div>
                    <input type="file" capture="environment" class="photo-input-hidden" onchange="handleImageUpload(this, ${index})">
                </div>
                <div class="dim-area">
                    <div class="row-title">NO.${index + 1} &nbsp;${loc}</div>
                    <div class="form-row">
                        <select id="loc_${index}" style="flex:1;">
                            <option value="${loc}" selected>${loc}</option>
                            ${locations.map(l => `<option value="${l}">${l}</option>`).join('')}
                        </select>
                    </div>
                    <select id="type_${index}" style="margin-bottom:4px;">${windowOptions}</select>
                    <div class="form-row">
                        <input type="number" id="w_${index}" placeholder="ê°€ë¡œ mm">
                        <input type="number" id="h_${index}" placeholder="ì„¸ë¡œ mm">
                    </div>
                </div>
            </div>
        `;
        inputArea.innerHTML += html;
    });

    const companyDB = {
        'Aì‚¬': { name: 'Aì‚¬ (í‘œì¤€)', specs: { 'S_IN': 13000, 'S_BAL': 14000, 'D_IN': 20000, 'D_EXT': 24000, 'SYS': 14000, 'PJ': 15000 } },
        'Bì‚¬': { name: 'Bì‚¬ (ì•Œëœ°)', specs: { 'S_IN': 12500, 'S_BAL': 13500, 'D_IN': 19500, 'D_EXT': 23500, 'SYS': 13500, 'PJ': 14500 } },
        'Cì‚¬': { name: 'Cì‚¬ (ê³ ê¸‰)', specs: { 'S_IN': 15000, 'S_BAL': 16000, 'D_IN': 22000, 'D_EXT': 26000, 'SYS': 16000, 'PJ': 17000 } },
        'Dì‚¬': { name: 'Dì‚¬ (ë¹ ë¥¸)', specs: { 'S_IN': 13200, 'S_BAL': 14200, 'D_IN': 20200, 'D_EXT': 24200, 'SYS': 14200, 'PJ': 15200 } },
        'Eì‚¬': { name: 'Eì‚¬ (íŠ¹í™”)', specs: { 'S_IN': 12800, 'S_BAL': 13800, 'D_IN': 19800, 'D_EXT': 23800, 'SYS': 13800, 'PJ': 14800 } },
        'Fì‚¬': { name: 'Fì‚¬ (ì¹œì ˆ)', specs: { 'S_IN': 14000, 'S_BAL': 15000, 'D_IN': 21000, 'D_EXT': 25000, 'SYS': 15000, 'PJ': 16000 } }
    };

    window.calculateEstimates = function() {
        let totalArea = 0;
        let requestList = [];

        for(let i=0; i<9; i++) {
            const w = parseFloat(document.getElementById(`w_${i}`).value) || 0;
            const h = parseFloat(document.getElementById(`h_${i}`).value) || 0;
            const typeCode = document.getElementById(`type_${i}`).value;

            if (w > 0 && h > 0) {
                const pyeong = (w * h) / 90000;
                requestList.push({ typeCode: typeCode, qty: pyeong });
                totalArea += pyeong;
            }
        }

        if (totalArea === 0) {
            alert("ì •í™•í•œ ê²¬ì ì„ ìœ„í•´ ì¹˜ìˆ˜ë¥¼ í•˜ë‚˜ ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        let results = [];
        const compKeys = Object.keys(companyDB);

        compKeys.forEach(key => {
            const comp = companyDB[key];
            let totalCost = 0;
            requestList.forEach((req) => {
                const price = comp.specs[req.typeCode] || 0;
                totalCost += price * req.qty;
            });
            const baseCost = 1000000 + (totalArea * 10000);
            results.push({ name: comp.name, price: Math.floor(totalCost + baseCost) });
        });

        renderGraph(results);
    }

    function renderGraph(data) {
        const resultSection = document.getElementById('resultSection');
        const graphContainer = document.getElementById('graphContainer');
        resultSection.style.display = 'block';
        graphContainer.innerHTML = '';

        data.sort((a, b) => a.price - b.price);
        const maxPrice = Math.max(...data.map(d => d.price));

        data.forEach((item, idx) => {
            const percent = (item.price / maxPrice) * 100;
            let barClass = 'g-bar';
            if (idx === 0) barClass += ' best';
            else if (idx === 1) barClass += ' second';

            const html = `
                <div class="graph-row">
                    <div class="g-label">${item.name.split(' ')[0]}</div>
                    <div class="g-bar-area">
                        <div class="${barClass}" style="width: ${percent}%;"></div>
                    </div>
                    <div class="g-price">${item.price.toLocaleString()}ì›</div>
                </div>
            `;
            graphContainer.innerHTML += html;
        });

        setTimeout(() => {
            resultSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
    }
</script>

</body>
</html>
